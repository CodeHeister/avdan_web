var dragList = [];

// mousedown event (control element)
const dragAdd = (e, currentTarget, target, currentTarget_in_f, target_in_f, currentTarget_out_f, target_out_f) => {
	dragList.push({"currentTarget":currentTarget,"target":target,"currentTarget_inf":currentTargetf,"target_inf":targetf});
	var target = document.querySelector(target);

	if (currentTargetf != undefined) {
		currentTargetf(e.currentTarget);
	}

	if (targetf != undefined) {
		targetf(target);
	}
}

//mousemove event (window)
const drag = e => {
	dragList.forEach(item => {
		var target = document.querySelector(item["target"]);
		var targetX = e.clientX+window.scrollX-target.offsetLeft;
		var targetY = e.clientY+window.scrollY-target.offsetTop;
		var targetTransformX = 0;
		var targetTransformY = 0;
		if (target.style.transform != '') {
			var nums = target.style.transform.split("translate3d")[1];
			nums = nums.slice(1, nums.length-1).split("px,");
			targetTransformX = parseInt(nums[0]);
			targetTransformY = parseInt(nums[1]);
		}
		var targetCursorX = targetX-targetTransformX;
		var targetCursorY = targetY-targetTransformY;
		
		target.style.transform = `translate3d(${targetX-targetCursorX+e.movementX}px,${targetY-targetCursorY+e.movementY}px,0) translate(-90%, 0)`;
	});
}

//mouseup event (control element) (also may be mouseout as main drop) 
const leave = (e, currentTarget, target) => { // event, move target, fuction for control, function for target
	
	for (var i = 0; i < dragList.length; i++) { 
    
        if ( dragList[i]["target"] == target) { 
    
            dragList.splice(i, 1); 
        }
    
    }

	var target = document.querySelector(target);

	if (fcurrentTarget != undefined) {
		fcurrentTarget(e.currentTarget);
	}

	if (fTarget != undefined) {
		fTarget(target);
	}
}
